<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Demeter boarding pass</title>

<!-- ì–‡ì€ ê¸€ì”¨ í°íŠ¸ -->
<link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@300&display=swap" rel="stylesheet">

<style>
    body { font-family: Arial, sans-serif; margin: 0; background-color: #fff; text-align: center; }
    header { display: flex; align-items: center; padding: 10px; background-color: white; border-bottom: 1px solid #ddd; }
    header img { width: 30px; height: 30px; border-radius: 50%; margin-right: 10px; }
    .title { font-weight: bold; font-size: 14px; }
    .banner { position: relative; }
    .banner img { width: 100%; height: auto; }
    .banner-text { position: absolute; top: 15px; left: 50%; transform: translateX(-50%); color: white; font-size: 20px; font-weight: bold; text-shadow: 1px 1px 5px rgba(0,0,0,0.7); }

    .content { display: flex; align-items: center; justify-content: flex-start; padding: 15px; }
    .content img { width: 60px; height: 60px; border-radius: 50%; margin-right: 15px; flex: 0 0 auto; }
    .content p { font-size: 14px; line-height: 1.4; margin: 0; text-align: left; flex: 1; }
    
    .textbox { margin: 15px; border: 1px solid #ccc; padding: 20px; font-size: 16px; text-align: left; border-radius: 8px; }
    .top-section { background: url('login.png') no-repeat center center; background-size: cover; padding: 130px 20px; color: white; }

    /* ìˆ˜ì •ëœ text-section - í™”ë©´ ìë™ ë§ì¶¤ */
    .text-section {
        background: url('text.jpg') no-repeat center center;
        background-size: cover;
        width: 100%;
        aspect-ratio: 16 / 9; /* í™”ë©´ ë¹„ìœ¨ì— ë§ì¶° ìë™ ì¡°ì ˆ */
        color: white;
    }
    @media (max-width: 600px) {
        .text-section {
            aspect-ratio: 4 / 3; /* ëª¨ë°”ì¼ì—ì„œ ì„¸ë¡œ ë¹„ìœ¨ ì•½ê°„ ëŠ˜ë¦¼ */
        }
    }

    .top-section h2 { margin-bottom: 15px; text-shadow: 1px 1px 5px rgba(0,0,0,0.7); }

    .input-lalrge{ width:300px; padding: 10px; font-size: 16px; }

    .mobile-break { display: none; }
    @media(max-width: 600px){ .mobile-break { display: block; } }

    .responsive-title {
        margin-top : 10px;
        margin-bottom: 140px;
    }


    input { display: block; width: 200px; padding: 10px; margin: 10px auto; border-radius: 5px; border: 1px solid #ccc; font-size: 16px; }
    button { padding: 10px 20px; margin-top: 15px; background-color: #1e90ff; color: white; border: none; border-radius: 5px; font-size: 16px; font-weight: bold; cursor: pointer; }
    canvas { max-width: 100%; height: auto; margin-top: 20px; }
</style>
</head>
<body>

<div id="mainContent">
    <!-- ìƒë‹¨ ê¸°ë³¸ í™”ë©´ -->
    <header>
        <img src="logo.jpg" alt="logo">
        <div class="title">Demeter boarding pass</div>
    </header>

    <div class="banner">
        <img src="backGround.jpg" alt="rocket">
        <div class="banner-text">Voyage of demeter</div>
    </div>

    <div class="content">
        <img src="logo.jpg" alt="í‘¸ë¥¸ìˆ²">
        <p class="responsive-title2">í‘¸ë¥¸ìˆ² ì¶œíŒì‚¬ëŠ” ë¯¸ì§€ì˜ êµ¬ì¡°ë¬¼ì„ íƒí—˜í•˜ê¸° ìœ„í•œ<span class="mobile-break"></span> ë°ë©”í…Œë¥´í˜¸ ë¯¸ì…˜ì„ ì¶”ì§„ ì¤‘ì…ë‹ˆë‹¤.</p>
    </div>

    <div class="textbox">ë°ë©”í…Œë¥´í˜¸ëŠ” ìƒí™©ì— ë”°ë¼ ë²”ì„ , ì¦ê¸°ì„ , ë¹„í–‰ì„ , ìš°ì£¼ì„ ìœ¼ë¡œ ì—¬ëŸ¬ ë²ˆ ë³€ëª¨í•˜ì—¬ ì‹œê³µê°„ì„ ë„˜ë‚˜ë“­ë‹ˆë‹¤. ì§€ê¸ˆ, í•¨ê»˜ íƒ‘ìŠ¹í•˜ì—¬ 19ì„¸ê¸°, 20ì„¸ê¸°, ê·¼ë¯¸ë˜, ë¨¼ ë¯¸ë˜ì˜ ìš°ì£¼ë¥¼ ììœ ë¡­ê²Œ ìœ ì˜í•  ìš©ê°í•œ ì›ì •ëŒ€ë¥¼ ëª¨ì§‘í•©ë‹ˆë‹¤.
<br><br>
<div class="text-section"></div>
<br>
ê³„ì•½ ì¡°ê±´ì´ ê·¹ë„ë¡œ ì˜ì‹¬ìŠ¤ëŸ¬ìš°ë©°, í•­í•´ ë„ì¤‘ ê·¹ì‹¬í•œ ë©€ë¯¸ì™€ ì•…ëª½ì— ì‹œë‹¬ë¦´ ìˆ˜ ìˆê³ , ê°„í˜¹ í˜„ì‹¤ê³¼ í—ˆêµ¬ê°€ êµ¬ë¶„ë˜ì§€ ì•Šìœ¼ë©°, ê²°êµ­ ë¯¸ìŠ¤í„°ë¦¬í•œ ì£½ìŒì„ ë§ˆì£¼í•˜ê²Œ ë˜ê² ì§€ë§Œ, ë¯¸ì§€ì˜ êµ¬ì¡°ë¬¼ì„ ë°œê²¬í•˜ê¸°ë§Œ í•œë‹¤ë©´ ìš°ë¦¬ì˜ ì´ë¦„ì€ ì—­ì‚¬ì— ì˜¤ë˜ ê¸°ë¡ë  ê²ƒ ì…ë‹ˆë‹¤.<br><br>
í™©ê¸ˆë¹› ë¯¸ë˜ê°€ ë‹¹ì‹ ì„ ê¸°ë‹¤ë¦¬ê³  ìˆìŠµë‹ˆë‹¤. í•¨ê»˜ íƒ‘ìŠ¹í•˜ì‹œê² ìŠµë‹ˆê¹Œ?
<br><br>
â€»ì£¼ì˜: ì¼ë‹¨ íƒ‘ìŠ¹í•˜ë©´ ë„ì¤‘ì— ë‚´ë¦¬ê¸° ì–´ë ¤ìš°ë¯€ë¡œ ì‹ ì¤‘í•œ ê²°ë‹¨ì„ ìš”í•©ë‹ˆë‹¤.
<br>
</div>

    <!-- ì´ë¦„ ì…ë ¥ -->
    <div class="top-section">
        <h2 class="responsive-title">ë‹¹ì‹ ì˜ íƒ‘ìŠ¹ê¶Œì—<span class="mobile-break"></span> ìƒˆê²¨ì§ˆ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”</h2>
        <input type="text" id="firstName" placeholder="ì´ë¦„ (ì˜ë¬¸)">
        <input type="text" id="lastName" placeholder="ì„± (ì˜ë¬¸)">
        <button onclick="generateTicket()">ì™„ë£Œ</button>
    </div>
</div>

<!-- í•˜ë‹¨ ë¯¸ë¦¬ë³´ê¸° -->
<div id="previewSection" style="display:none;">
    <canvas id="previewCanvas"></canvas>
    <br>
    <button onclick="issueTicket()">ë°œê¸‰ë°›ê¸°</button>
</div>

<!-- ì „ì²´ í‹°ì¼“ í™”ë©´ -->
<div id="fullTicketSection" style="display:none; background:#000; padding:10px;">
    <canvas id="fullCanvas"></canvas>
</div>

<script>
let savedName = "";

// ì´ë¦„ ê¸¸ì´ ìë™ ì¡°ì ˆ + ë¯¸ë¦¬ë³´ê¸°
function generateTicket() {
    const firstName = document.getElementById('firstName').value.trim();
    const lastName = document.getElementById('lastName').value.trim();
    if (!firstName || !lastName) { alert("ì´ë¦„ê³¼ ì„±ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”."); return; }

    savedName = (firstName + " " + lastName).toUpperCase();
    const canvas = document.getElementById('previewCanvas');
    const ctx = canvas.getContext('2d');
    const img = new Image();
    img.src = 'empty.png';
    img.onload = function() {
        canvas.width = img.width;
        canvas.height = img.height;
        ctx.drawImage(img, 0, 0);

        ctx.fillStyle = "white";
        ctx.textAlign = "left";

        let fontSize = 95;
        ctx.font = `300 ${fontSize}px 'Roboto Condensed', sans-serif`;
        const maxWidth = 1000; 
        while (ctx.measureText(savedName).width > maxWidth && fontSize > 10) {
            fontSize--;
            ctx.font = `300 ${fontSize}px 'Roboto Condensed', sans-serif`;
        }

        ctx.fillText(savedName, 800, 390);

        document.getElementById('previewSection').style.display = 'block';

        document.getElementById('previewSection').scrollIntoView({
            behavior: 'smooth',
            block: 'start'

        });
    };
}

// ë°œê¸‰ + ì„¸ë¡œ íšŒì „ í‹°ì¼“ + ë‹¤ìš´ë¡œë“œ
function issueTicket() {
    const canvas = document.getElementById('fullCanvas');
    const ctx = canvas.getContext('2d');
    const img = new Image();
    img.src = 'empty.png';
    img.onload = function() {
        canvas.width = img.height;
        canvas.height = img.width;

        ctx.save();
        ctx.translate(canvas.width / 2, canvas.height / 2);
        ctx.rotate(-Math.PI / 2);
        ctx.drawImage(img, -img.width / 2, -img.height / 2);
        ctx.restore();

        ctx.fillStyle = "white";
        ctx.textAlign = "center";

        let fontSize = 95;
        ctx.font = `300 ${fontSize}px 'Roboto Condensed', sans-serif`;
        const maxWidth = 1000;
        while (ctx.measureText(savedName).width > maxWidth && fontSize > 10) {
            fontSize--;
            ctx.font = `300 ${fontSize}px 'Roboto Condensed', sans-serif`;
        }

        ctx.save();
        ctx.translate(canvas.width / 2, canvas.height / 2);
        ctx.rotate(-Math.PI / 2);
        ctx.fillText(savedName, -30, -70);
        ctx.restore();

        document.getElementById('mainContent').style.display = 'none';
        document.getElementById('previewSection').style.display = 'none';
        document.getElementById('fullTicketSection').style.display = 'block';

        const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);

        if (isMobile) {
            const ticketImage = canvas.toDataURL("image/jpeg");
            document.getElementById('fullTicketSection').innerHTML =
                `<img src="${ticketImage}" style="width:100%;height:auto;"/>
                 <p style="color:white;text-align:center;margin-top:10px;">
                 ğŸ“Œ ì´ë¯¸ì§€ë¥¼ ê¸¸ê²Œ ëˆŒëŸ¬ ì €ì¥í•˜ì„¸ìš”.</p>`;
        } else {
            const link = document.createElement('a');
            link.download = 'ticket.jpg';
            link.href = canvas.toDataURL("image/jpeg");
            link.click();
        }
    };
}
</script>

</body>
</html>
